# REST API Organizations Directory

REST API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –∑–¥–∞–Ω–∏–π –∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd restapiApp

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker-compose up --build
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker –±–µ–∑ Docker Compose

```bash
# –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ (SQLite –≤–µ—Ä—Å–∏—è)
docker build -f Dockerfile.sqlite -t organizations-api .

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run -p 8000:8000 organizations-api
```

## üõ† –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- pip

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd restapiApp

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
python seed_data.py

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
uvicorn main:app --reload
```

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:

```
X-API-Key: your-secret-api-key-here
```

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `GET /api/v1/organizations/{id}` - –ü–æ–ª—É—á–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø–æ ID
- `GET /api/v1/organizations/search?name={name}` - –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- `POST /api/v1/organizations` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é

### –ó–¥–∞–Ω–∏—è
- `GET /api/v1/buildings` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–¥–∞–Ω–∏–π
- `GET /api/v1/buildings/{id}` - –ü–æ–ª—É—á–∏—Ç—å –∑–¥–∞–Ω–∏–µ –ø–æ ID
- `GET /api/v1/buildings/{id}/organizations` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ –∑–¥–∞–Ω–∏–∏
- `POST /api/v1/buildings` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∑–¥–∞–Ω–∏–µ

### –î–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `GET /api/v1/activities` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- `GET /api/v1/activities/{id}` - –ü–æ–ª—É—á–∏—Ç—å –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ ID
- `GET /api/v1/activities/{id}/organizations` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `GET /api/v1/activities/{id}/organizations/hierarchy?level={level}` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏
- `POST /api/v1/activities` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ì–µ–æ–ø–æ–∏—Å–∫
- `POST /api/v1/organizations/geo/radius` - –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ
- `POST /api/v1/organizations/geo/rectangle` - –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest test_*.py -v

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
pytest test_business_logic.py -v

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=. test_*.py
```

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è PostgreSQL.

### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "Description"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
alembic downgrade -1
```

## üìä –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

- **5 –∑–¥–∞–Ω–∏–π** –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–π–æ–Ω–∞—Ö –ú–æ—Å–∫–≤—ã
- **10 –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π** —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **5 –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π** —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏ –∏ —Å–≤—è–∑—è–º–∏ —Å –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```bash
python seed_data.py
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.py`:

- `DATABASE_URL` - URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `API_KEY` - –ö–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `APP_NAME` - –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `APP_VERSION` - –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üê≥ Docker –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ (SQLite)
docker build -f Dockerfile.sqlite -t organizations-api .

# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ (PostgreSQL)
docker build -t organizations-api .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 organizations-api

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs <container-id>

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stop <container-id>
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
```bash
curl -X GET "http://localhost:8000/api/v1/organizations/search?name=–†–æ–≥–∞" \
  -H "X-API-Key: your-secret-api-key-here"
```

### –ì–µ–æ–ø–æ–∏—Å–∫ –≤ —Ä–∞–¥–∏—É—Å–µ
```bash
curl -X POST "http://localhost:8000/api/v1/organizations/geo/radius" \
  -H "X-API-Key: your-secret-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "latitude": 55.7539,
    "longitude": 37.6208,
    "radius_km": 1.0
  }'
```

### –ü–æ–∏—Å–∫ –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
```bash
curl -X GET "http://localhost:8000/api/v1/activities/1/organizations/hierarchy?level=3" \
  -H "X-API-Key: your-secret-api-key-here"
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–¥–∞–Ω–∏—è
```bash
curl -X POST "http://localhost:8000/api/v1/buildings" \
  -H "X-API-Key: your-secret-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–ù–æ–≤–æ–µ –∑–¥–∞–Ω–∏–µ",
    "address": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ù–æ–≤–∞—è, 123",
    "latitude": 55.7558,
    "longitude": 37.6176
  }'
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** - ORM
- **Alembic** - –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Health check**: `GET /health`
- **–ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç**: `GET /`

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License 