# üìä –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è (Coverage)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install pytest-cov coverage
```

### –ó–∞–ø—É—Å–∫ coverage
```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
python run_coverage.py

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ pytest
pytest test_*.py --cov=. --cov-report=term-missing --cov-report=html:htmlcov -v
```

## üìà –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–∫—Ä—ã—Ç–∏—è

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest test_*.py --cov=. -v

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç —Å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏
pytest test_*.py --cov=. --cov-report=term-missing -v

# HTML –æ—Ç—á–µ—Ç
pytest test_*.py --cov=. --cov-report=html:htmlcov -v

# XML –æ—Ç—á–µ—Ç (–¥–ª—è CI/CD)
pytest test_*.py --cov=. --cov-report=xml -v

# –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç—á–µ—Ç–æ–≤
pytest test_*.py --cov=. --cov-report=term-missing --cov-report=html:htmlcov --cov-report=xml -v
```

### –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
```bash
# –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
pytest test_*.py --cov=main --cov=models --cov=schemas --cov=utils -v

# –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
pytest test_*.py --cov=. --cov-report=term-missing --omit="test_*.py" -v
```

### –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É coverage
coverage report --show-missing

# –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
coverage report -m

# –°–æ–∑–¥–∞—Ç—å HTML –æ—Ç—á–µ—Ç
coverage html

# –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–æ —Ñ–∞–π–ª—É
coverage report --include="main.py"
```

## üéØ –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏—è

### –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:
- **90%+** - –û—Ç–ª–∏—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- **80-90%** - –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- **70-80%** - –ü—Ä–∏–µ–º–ª–µ–º–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- **<70%** - –¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è

### –§–∞–π–ª—ã –¥–ª—è –æ—Å–æ–±–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è:
- `main.py` - –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã API
- `models.py` - –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `schemas.py` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `utils.py` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

## üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```
Name                    Stmts   Miss  Cover   Missing
-----------------------------------------------------
main.py                    45      2    96%   15, 23
models.py                  30      0   100%
schemas.py                 25      1    96%   12
utils.py                   20      3    85%   8-10
-----------------------------------------------------
TOTAL                     120      6    95%
```

### –í HTML –æ—Ç—á–µ—Ç–µ:
- **–ó–µ–ª–µ–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** - –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- **–ö—Ä–∞—Å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** - –ø—Ä–æ–ø—É—â–µ–Ω—ã
- **–ñ–µ–ª—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏** - —á–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .coveragerc

–§–∞–π–ª `.coveragerc` —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **omit** - —Ñ–∞–π–ª—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **exclude_lines** - —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **source** - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

### GitHub Actions –ø—Ä–∏–º–µ—Ä:
```yaml
- name: Run tests with coverage
  run: |
    pytest test_*.py --cov=. --cov-report=xml --cov-report=term-missing
    coverage report --fail-under=80
```

### GitLab CI –ø—Ä–∏–º–µ—Ä:
```yaml
test:
  script:
    - pytest test_*.py --cov=. --cov-report=xml
    - coverage report --fail-under=80
```

## üí° –°–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –ø–æ–∫—Ä—ã—Ç–∏—è

### 1. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è:
- –û–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –ì—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π

### 2. –ò—Å–∫–ª—é—á–∏—Ç–µ –∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è:
- –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- –°–∫—Ä–∏–ø—Ç—ã —É—Ç–∏–ª–∏—Ç
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 3. –§–æ–∫—É—Å –Ω–∞:
- –û—Å–Ω–æ–≤–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—é

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```bash
# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
python run_coverage.py

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –æ—Ç—á–µ—Ç–æ–º
coverage diff
```

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- **main.py**: 95%+
- **models.py**: 100%
- **schemas.py**: 95%+
- **utils.py**: 90%+
- **–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: 90%+ 